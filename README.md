# kurs_5_sql

## Установка и использование

Для работы программы необходимо установить зависимости, 
указанные в файле `requirements.txt`

pip install -r requirements.txt

либо использовать pyproject.toml

Для работы с базой данных необходимо создать файл `.env` 
с параметрами доступа к базе данных PostgresSQL. 
Пример содержимого файла:

```
POSTGRES_HOST=localhost
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_PORT=5432
POSTGRES_DB=curs5

```

Программа получает данные о работодателях и их вакансиях с сайта hh.ru.

Выбирает топ 10 компаний по количеству открытых вакансий. 
Получает данные о вакансиях по API для каждой из 10 компаний.
Создает БД 'curs5' и таблицы в БД PostgreSQL для хранения полученных данных
о работодателях и их вакансиях. Для работы с БД использует библиотеку
psycopg2.
Заполняет созданные в БД PostgreSQL таблицы данными
о работодателях и их вакансиях.
Использует класс DBManager для работы с данными в БД.
Класс имеет следующие методы:

    create_database(params: dict)
    - создание базы данных и необходимых таблиц по переданным параметрам

    insert_data(table_name, data: list[dict])
    - добавление данных в указанную таблицу

    get_companies_and_vacancies_count()
     — получение списка всех компаний и количество вакансий у каждой компании.

    get_all_vacancies()
     — получение списка всех вакансий с указанием названия компании,
    названия вакансии и зарплаты и ссылки на вакансию.

    get_avg_salary()
     — получение средней зарплаты по вакансиям. (В разрезе currency, gross).

    get_vacancies_with_higher_salary()
     — получение списка всех вакансий, у которых зарплата выше средней по всем вакансиям. (В разрезе currency, gross).


    get_vacancies_with_keyword()
     — получение списка всех вакансий, в названии которых содержатся переданные
    в метод слова, например python.

    close_conn()
    - завершение коннекции



